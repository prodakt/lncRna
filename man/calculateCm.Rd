% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculateCm.R
\name{calculateCm}
\alias{calculateCm}
\title{Calculate Confusion Matrices and Optionally Use Pre-calculated Metrics}
\usage{
calculateCm(
  sumCombToolsList,
  printMetricThresholdMethods = FALSE,
  threshold = 0.8,
  returnOnlyHighMethods = FALSE,
  metricToExtract = "Accuracy",
  bestToolCombMetricsData = NULL,
  positiveClass = "1"
)
}
\arguments{
\item{sumCombToolsList}{A list generated by \code{sumCombTools()}, containing
\verb{$toolCombinations} and \verb{$isNC}.}

\item{printMetricThresholdMethods}{If \code{TRUE}, prints performance metric
values for each combination.}

\item{threshold}{A numeric value (0 to 1) used to evaluate \code{metricToExtract}.}

\item{returnOnlyHighMethods}{If \code{TRUE}, returns confusion matrices only for
combinations meeting the \code{threshold}.}

\item{metricToExtract}{The performance metric to extract/evaluate. Defaults
to "Accuracy".}

\item{bestToolCombMetricsData}{An optional data.frame of metrics, typically
the output of \code{bestToolComb()}. If provided, \code{metricToExtract} is looked
up here for threshold decisions.}

\item{positiveClass}{The class level to be considered "positive". Defaults
to "1".}
}
\value{
A named list of \code{confusionMatrix} objects.
}
\description{
This function calculates \code{confusionMatrix} objects for tool combination
predictions from a \code{sumCombTools} list. It can optionally use a separate data
frame of pre-calculated metrics to filter or highlight results.
}
\examples{
# Assume core package functions are available
if (requireNamespace("caret", quietly = TRUE)) {

  # 1. Create a minimal example input list (mimicking sumSingleTools output)
  set.seed(101)
  nSeqEx <- 50
  exampleSstList <- list(
    seqIDs = paste0("Seq", seq_len(nSeqEx)),
    tools = list(
      ToolX = sample(c(0,1),nSeqEx,replace=TRUE),
      ToolY = sample(c(0,1),nSeqEx,replace=TRUE),
      ToolZ = sample(c(0,1),nSeqEx,replace=TRUE)
    ),
    type = sample(c("nc","cds"),nSeqEx,replace=TRUE),
    isNC = NULL
  )
  exampleSstList$isNC <- ifelse(exampleSstList$type=="nc",1,0)

  # 2. Generate a valid sumCombTools list
  sumCombToolsListExample <- sumCombTools(
      sumSingleToolsList = exampleSstList,
      tools = c("ToolX", "ToolY", "ToolZ")
  )

  # 3. Generate a valid bestToolComb metrics data frame
  bestToolCombMetricsExample <- bestToolComb(
    sumCombToolsList = sumCombToolsListExample
  )

  # Now, with valid inputs, we can run the examples for calculateCm
  if (!is.null(sumCombToolsListExample) && !is.null(bestToolCombMetricsExample)) {
    message("\nExample 1: Using sumCombToolsList only")
    cmList1 <- calculateCm(
      sumCombToolsList = sumCombToolsListExample,
      printMetricThresholdMethods = TRUE,
      metricToExtract = "Accuracy"
    )

    message("\nExample 2: Using both lists, filtering by Sensitivity >= 0.5")
    cmList2 <- calculateCm(
      sumCombToolsList = sumCombToolsListExample,
      bestToolCombMetricsData = bestToolCombMetricsExample,
      returnOnlyHighMethods = TRUE,
      metricToExtract = "Sensitivity",
      threshold = 0.50,
      printMetricThresholdMethods = TRUE
    )
  }
}
}
